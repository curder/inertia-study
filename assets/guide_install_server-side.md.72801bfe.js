import{_ as s,c as a,o as l,N as n}from"./chunks/framework.88edf3e2.js";const C=JSON.parse('{"title":"服务器端设置","description":"","frontmatter":{},"headers":[],"relativePath":"guide/install/server-side.md","lastUpdated":1681363262000}'),e={name:"guide/install/server-side.md"},p=n(`<h1 id="服务器端设置" tabindex="-1">服务器端设置 <a class="header-anchor" href="#服务器端设置" aria-label="Permalink to &quot;服务器端设置&quot;">​</a></h1><h2 id="安装前准备" tabindex="-1">安装前准备 <a class="header-anchor" href="#安装前准备" aria-label="Permalink to &quot;安装前准备&quot;">​</a></h2><p>此安装过程在服务器端使用 Laravel，在客户端使用 Vue.js，在执行此部分之前，需要遵循以下条件：</p><ul><li>Node.js 10x 或更高版本、 Yarn / npm 5.2 或更高版本</li><li>PHP &gt;= 8.1, Composer 以及 Laravel</li><li>掌握 Vue 和 Laravel 基础</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 下载 Laravel 框架并命名为 laravel-inertia</span></span>
<span class="line"><span style="color:#FFCB6B;">composer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create-project</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--prefer-dist</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">laravel/laravel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">laravel-inertia</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 进入项目</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">laravel-inertia</span></span></code></pre></div><h2 id="安装依赖" tabindex="-1">安装依赖 <a class="header-anchor" href="#安装依赖" aria-label="Permalink to &quot;安装依赖&quot;">​</a></h2><p>首先，使用 Composer 包管理器安装 Inertia 服务器端包。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">composer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inertiajs/inertia-laravel</span></span></code></pre></div><h2 id="添加根模版" tabindex="-1">添加根模版 <a class="header-anchor" href="#添加根模版" aria-label="Permalink to &quot;添加根模版&quot;">​</a></h2><p>设置将在访问应用程序时加载的根模板。</p><ol><li><p>删除 <code>resources/views/welcome.blade.php</code> 默认模版文件</p></li><li><p>新增 <code>resources/views/app.blade.php</code> 根模版文件，内容如下：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0, maximum-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    @vite(&#39;resources/js/app.js&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    @inertiaHead</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    @inertia</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><blockquote><p>将上面的内容替换到 <code>resources/views/app.blade.php</code></p></blockquote><p>上面的内容包括了 vite 打包后的资源以及 <code>@inertia</code> 和 <code>@inertiaHead</code> 指令。</p><p>默认情况下，Inertia 的 Laravel 适配器将假定根模板名为 <code>app.blade.php</code>。</p><p>如果想使用不同的根模版的话可以使用 <code>Inertia::setRootView()</code> 方法进行更改。</p></li></ol><h2 id="中间件" tabindex="-1">中间件 <a class="header-anchor" href="#中间件" aria-label="Permalink to &quot;中间件&quot;">​</a></h2><p>通过将 HandleInertiaRequests 中间件发布到应用程序来完成此操作，可以使用以下 Artisan 命令来完成：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">php</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">artisan</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inertia:middleware</span></span></code></pre></div><p>发布中间件后，在 <code>App\\Http\\Kernel.php</code> 中将 <code>HandleInertiaRequests</code> 中间件注册为 <code>web</code> 中间件组中的最后一项。</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">web</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">App</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Http</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Middleware</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">HandleInertiaRequests</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">],</span></span></code></pre></div><p>中间件提供了一个 <code>version()</code> 方法来设置前端css、js等资源的版本，以及一个 <code>share()</code> 方法来定义共享数据。</p><p>至此服务器端设置已经就绪。</p>`,18),o=[p];function t(c,r,i,D,y,d){return l(),a("div",null,o)}const h=s(e,[["render",t]]);export{C as __pageData,h as default};
